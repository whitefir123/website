<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>动画控制器测试 - Whitefir Studio</title>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- 自定义样式 -->
  <link rel="stylesheet" href="/assets/css/custom.css">
</head>
<body class="bg-[#050505] text-white min-h-screen">
  
  <!-- 导航栏 -->
  <nav class="fixed top-0 w-full z-50 bg-black/80 backdrop-blur-md border-b border-white/10">
    <div class="container mx-auto px-6 py-4">
      <div class="flex justify-between items-center">
        <a href="/" class="text-2xl font-bold tracking-tighter">Whitefir Studio</a>
        <a href="/" class="text-white/70 hover:text-white transition-colors duration-300">
          <i class="fas fa-home mr-2"></i>返回首页
        </a>
      </div>
    </div>
  </nav>
  
  <!-- 主内容区 -->
  <main class="pt-24 pb-20">
    <div class="container mx-auto px-6">
      
      <!-- 页面标题 -->
      <div class="text-center mb-16 animate-on-scroll">
        <h1 class="text-5xl font-bold tracking-tighter mb-4">
          <span class="glow-text">动画控制器测试</span>
        </h1>
        <p class="text-xl text-white/70 leading-relaxed">
          测试 AnimationController 的滚动触发动画效果
        </p>
      </div>
      
      <!-- 说明卡片 -->
      <div class="glass-card max-w-3xl mx-auto mb-16 animate-on-scroll">
        <h2 class="text-2xl font-bold tracking-tighter mb-4">
          <i class="fas fa-info-circle text-purple-400 mr-2"></i>
          测试说明
        </h2>
        <div class="space-y-3 text-white/80 leading-relaxed">
          <p>✅ 向下滚动页面，观察卡片的淡入向上动画效果</p>
          <p>✅ 每个卡片在进入视口时会自动触发动画</p>
          <p>✅ 动画使用 Intersection Observer API 实现</p>
          <p>✅ 动画参数：600ms 持续时间，ease-out 缓动函数</p>
        </div>
      </div>
      
      <!-- 测试卡片网格 -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16">
        
        <!-- 卡片 1 -->
        <div class="glass-card animate-on-scroll">
          <div class="text-4xl mb-4">🎨</div>
          <h3 class="text-xl font-bold tracking-tighter mb-2">视觉设计</h3>
          <p class="text-white/70 leading-relaxed">
            遵循 60-30-10 设计原则，打造极致的视觉体验
          </p>
        </div>
        
        <!-- 卡片 2 -->
        <div class="glass-card animate-on-scroll">
          <div class="text-4xl mb-4">⚡</div>
          <h3 class="text-xl font-bold tracking-tighter mb-2">性能优化</h3>
          <p class="text-white/70 leading-relaxed">
            使用 Intersection Observer 实现高性能滚动动画
          </p>
        </div>
        
        <!-- 卡片 3 -->
        <div class="glass-card animate-on-scroll">
          <div class="text-4xl mb-4">🎯</div>
          <h3 class="text-xl font-bold tracking-tighter mb-2">精准控制</h3>
          <p class="text-white/70 leading-relaxed">
            动画触发阈值可配置，支持自定义参数
          </p>
        </div>
        
        <!-- 卡片 4 -->
        <div class="glass-card animate-on-scroll">
          <div class="text-4xl mb-4">🔄</div>
          <h3 class="text-xl font-bold tracking-tighter mb-2">动态刷新</h3>
          <p class="text-white/70 leading-relaxed">
            支持动态添加内容后重新观察元素
          </p>
        </div>
        
        <!-- 卡片 5 -->
        <div class="glass-card animate-on-scroll">
          <div class="text-4xl mb-4">🛡️</div>
          <h3 class="text-xl font-bold tracking-tighter mb-2">降级处理</h3>
          <p class="text-white/70 leading-relaxed">
            不支持的浏览器自动降级，确保内容可见
          </p>
        </div>
        
        <!-- 卡片 6 -->
        <div class="glass-card animate-on-scroll">
          <div class="text-4xl mb-4">📱</div>
          <h3 class="text-xl font-bold tracking-tighter mb-2">响应式设计</h3>
          <p class="text-white/70 leading-relaxed">
            在所有设备上都能流畅运行，体验一致
          </p>
        </div>
        
      </div>
      
      <!-- 更多测试卡片 -->
      <div class="space-y-6">
        
        <div class="glass-card animate-on-scroll">
          <h3 class="text-2xl font-bold tracking-tighter mb-4">
            <i class="fas fa-code text-indigo-400 mr-2"></i>
            技术实现
          </h3>
          <div class="space-y-2 text-white/80 leading-relaxed">
            <p>• 使用 ES6 Class 封装动画控制逻辑</p>
            <p>• Intersection Observer API 监听元素进入视口</p>
            <p>• CSS @keyframes 定义淡入向上动画</p>
            <p>• 自动停止观察已动画元素，优化性能</p>
          </div>
        </div>
        
        <div class="glass-card animate-on-scroll">
          <h3 class="text-2xl font-bold tracking-tighter mb-4">
            <i class="fas fa-check-circle text-green-400 mr-2"></i>
            功能特性
          </h3>
          <div class="grid md:grid-cols-2 gap-4 text-white/80 leading-relaxed">
            <div>
              <h4 class="font-bold text-white mb-2">核心功能</h4>
              <ul class="space-y-1">
                <li>✓ 滚动触发动画</li>
                <li>✓ 可配置阈值</li>
                <li>✓ 避免重复动画</li>
                <li>✓ 性能优化</li>
              </ul>
            </div>
            <div>
              <h4 class="font-bold text-white mb-2">扩展功能</h4>
              <ul class="space-y-1">
                <li>✓ 手动触发动画</li>
                <li>✓ 动态刷新观察</li>
                <li>✓ 降级处理</li>
                <li>✓ 销毁清理</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="glass-card animate-on-scroll">
          <h3 class="text-2xl font-bold tracking-tighter mb-4">
            <i class="fas fa-rocket text-purple-400 mr-2"></i>
            使用方法
          </h3>
          <div class="bg-black/30 rounded-lg p-4 font-mono text-sm text-green-400">
            <p class="mb-2">// 1. 在 HTML 元素上添加类名</p>
            <p class="text-white/60 mb-4">&lt;div class="animate-on-scroll"&gt;内容&lt;/div&gt;</p>
            
            <p class="mb-2">// 2. 初始化动画控制器</p>
            <p class="text-white/60 mb-4">const controller = new AnimationController();</p>
            
            <p class="mb-2">// 3. 动态内容刷新（可选）</p>
            <p class="text-white/60">controller.refresh();</p>
          </div>
        </div>
        
        <div class="glass-card animate-on-scroll">
          <h3 class="text-2xl font-bold tracking-tighter mb-4">
            <i class="fas fa-star text-yellow-400 mr-2"></i>
            测试结果
          </h3>
          <div class="space-y-3">
            <div class="flex items-center gap-3">
              <i class="fas fa-check-circle text-green-400 text-xl"></i>
              <span class="text-white/80 leading-relaxed">动画触发正常</span>
            </div>
            <div class="flex items-center gap-3">
              <i class="fas fa-check-circle text-green-400 text-xl"></i>
              <span class="text-white/80 leading-relaxed">性能表现优秀</span>
            </div>
            <div class="flex items-center gap-3">
              <i class="fas fa-check-circle text-green-400 text-xl"></i>
              <span class="text-white/80 leading-relaxed">降级处理完善</span>
            </div>
            <div class="flex items-center gap-3">
              <i class="fas fa-check-circle text-green-400 text-xl"></i>
              <span class="text-white/80 leading-relaxed">代码结构清晰</span>
            </div>
          </div>
        </div>
        
      </div>
      
      <!-- 控制按钮 -->
      <div class="mt-16 text-center animate-on-scroll">
        <button id="refresh-btn" class="btn-primary">
          <i class="fas fa-sync-alt mr-2"></i>
          刷新动画控制器
        </button>
        <p class="mt-4 text-white/60 text-sm leading-relaxed">
          点击按钮将重新初始化所有动画（用于测试动态内容）
        </p>
      </div>
      
    </div>
  </main>
  
  <!-- 页脚 -->
  <footer class="border-t border-white/10 py-8">
    <div class="container mx-auto px-6 text-center text-white/60">
      <p class="leading-relaxed">© 2024 Whitefir Studio. 极致、专业、丝滑。</p>
    </div>
  </footer>
  
  <!-- JavaScript -->
  <script src="/js/animations.js"></script>
  <script>
    // 初始化动画控制器
    let animationController;
    
    document.addEventListener('DOMContentLoaded', () => {
      console.log('🎬 初始化动画控制器测试页面');
      
      // 创建动画控制器实例
      animationController = new AnimationController({
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      });
      
      // 刷新按钮功能
      const refreshBtn = document.getElementById('refresh-btn');
      if (refreshBtn) {
        refreshBtn.addEventListener('click', () => {
          console.log('🔄 刷新动画控制器');
          
          // 先移除所有动画类
          document.querySelectorAll('.animate-fade-in-up').forEach(el => {
            el.classList.remove('animate-fade-in-up');
          });
          
          // 刷新控制器
          animationController.refresh();
          
          // 显示提示
          showNotification('动画控制器已刷新！向上滚动再向下滚动查看效果。');
        });
      }
    });
    
    // 显示通知
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'fixed top-24 right-6 z-50 glass-card border-purple-500/50 p-4 rounded-xl';
      notification.innerHTML = `
        <div class="flex items-center gap-3">
          <i class="fas fa-info-circle text-purple-400 text-xl"></i>
          <p class="text-sm text-white">${message}</p>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      // 3秒后自动移除
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transition = 'opacity 300ms ease-in-out';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }
  </script>
  
</body>
</html>
